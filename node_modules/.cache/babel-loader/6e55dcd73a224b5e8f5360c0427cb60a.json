{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohamed.nader.BASS\\\\Desktop\\\\Cloud Project\\\\Project\\\\Cloud Project\\\\Cloud Frontend\\\\src\\\\Store\\\\StoreContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { createContext, useState, useContext, useEffect } from \"react\";\nimport AuthContext from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StoreContext = /*#__PURE__*/createContext({});\nexport const StoreContextProvider = ({\n  children\n}) => {\n  _s();\n  const user = useContext(AuthContext);\n  const [typeFilter, setTypeFilter] = useState(\"\");\n  const [cart, setCart] = useState([]);\n  const [subTotal, setSubTotal] = useState(0);\n  const [products, setProducts] = useState([]);\n  const getCurrentCart = async () => {\n    console.log(\"inside get Current cart\");\n    await axios.get(`${process.env.REACT_APP_SERVER_ENDPOINT}/cart/${user.user._id}`).then(response => {\n      console.log(\"response is \", response.data);\n      console.log(\"response is \", response.data.cart.products);\n      setCart(response.data.cart.products);\n    }).catch(err => {\n      console.log(\"err is \", err);\n    });\n  };\n  useEffect(() => {\n    var _user$user$userRole;\n    console.log(\"user is \", user);\n    console.log(\"user.user._id is \", user.user._id);\n    if (((_user$user$userRole = user.user.userRole) === null || _user$user$userRole === void 0 ? void 0 : _user$user$userRole.toLowerCase()) == \"regular\") {\n      getCurrentCart();\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(StoreContext.Provider, {\n    value: {\n      cart,\n      setCart,\n      subTotal,\n      setSubTotal,\n      products,\n      setProducts,\n      typeFilter,\n      setTypeFilter,\n      getCurrentCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(StoreContextProvider, \"AHzd4npz6BO1+LI3N9ybsP2XGHA=\");\n_c = StoreContextProvider;\nconst useStore = () => {\n  _s2();\n  return useContext(StoreContext);\n};\n_s2(useStore, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default useStore;\nvar _c;\n$RefreshReg$(_c, \"StoreContextProvider\");","map":{"version":3,"names":["axios","React","createContext","useState","useContext","useEffect","AuthContext","jsxDEV","_jsxDEV","StoreContext","StoreContextProvider","children","_s","user","typeFilter","setTypeFilter","cart","setCart","subTotal","setSubTotal","products","setProducts","getCurrentCart","console","log","get","process","env","REACT_APP_SERVER_ENDPOINT","_id","then","response","data","catch","err","_user$user$userRole","userRole","toLowerCase","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useStore","_s2","$RefreshReg$"],"sources":["C:/Users/mohamed.nader.BASS/Desktop/Cloud Project/Project/Cloud Project/Cloud Frontend/src/Store/StoreContext.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { createContext, useState, useContext, useEffect } from \"react\";\r\nimport AuthContext from \"./AuthContext\";\r\n\r\nexport const StoreContext = createContext({});\r\n\r\nexport const StoreContextProvider = ({ children }) => {\r\n  const user = useContext(AuthContext);\r\n  const [typeFilter, setTypeFilter] = useState(\"\");\r\n\r\n  const [cart, setCart] = useState([]);\r\n\r\n  const [subTotal, setSubTotal] = useState(0);\r\n  const [products, setProducts] = useState([]);\r\n  \r\n\r\n  const getCurrentCart = async () => {\r\n    console.log(\"inside get Current cart\");\r\n    await axios\r\n      .get(`${process.env.REACT_APP_SERVER_ENDPOINT}/cart/${user.user._id}`)\r\n      .then((response) => {\r\n        console.log(\"response is \", response.data);\r\n        console.log(\"response is \", response.data.cart.products);\r\n        setCart(response.data.cart.products);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err is \", err);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"user is \", user);\r\n    console.log(\"user.user._id is \", user.user._id);\r\n    if (user.user.userRole?.toLowerCase() == \"regular\") {\r\n      getCurrentCart();\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <StoreContext.Provider\r\n      value={{\r\n        cart,\r\n        setCart,\r\n        subTotal,\r\n        setSubTotal,\r\n        products,\r\n        setProducts,\r\n        typeFilter,\r\n        setTypeFilter,\r\n        getCurrentCart,\r\n      }}\r\n    >\r\n      {children}\r\n    </StoreContext.Provider>\r\n  );\r\n};\r\n\r\nconst useStore = () => useContext(StoreContext);\r\n\r\nexport default useStore;\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7E,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,OAAO,MAAMC,YAAY,gBAAGP,aAAa,CAAC,CAAC,CAAC,CAAC;AAE7C,OAAO,MAAMQ,oBAAoB,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACpD,MAAMC,IAAI,GAAGT,UAAU,CAACE,WAAW,CAAC;EACpC,MAAM,CAACQ,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAEhD,MAAM,CAACa,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAEpC,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAG5C,MAAMmB,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjCC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtC,MAAMxB,KAAK,CACRyB,GAAG,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,yBAA0B,SAAQf,IAAI,CAACA,IAAI,CAACgB,GAAI,EAAC,CAAC,CACrEC,IAAI,CAAEC,QAAQ,IAAK;MAClBR,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEO,QAAQ,CAACC,IAAI,CAAC;MAC1CT,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEO,QAAQ,CAACC,IAAI,CAAChB,IAAI,CAACI,QAAQ,CAAC;MACxDH,OAAO,CAACc,QAAQ,CAACC,IAAI,CAAChB,IAAI,CAACI,QAAQ,CAAC;IACtC,CAAC,CAAC,CACDa,KAAK,CAAEC,GAAG,IAAK;MACdX,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEU,GAAG,CAAC;IAC7B,CAAC,CAAC;EACN,CAAC;EAED7B,SAAS,CAAC,MAAM;IAAA,IAAA8B,mBAAA;IACdZ,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEX,IAAI,CAAC;IAC7BU,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEX,IAAI,CAACA,IAAI,CAACgB,GAAG,CAAC;IAC/C,IAAI,EAAAM,mBAAA,GAAAtB,IAAI,CAACA,IAAI,CAACuB,QAAQ,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,WAAW,CAAC,CAAC,KAAI,SAAS,EAAE;MAClDf,cAAc,CAAC,CAAC;IAClB;EACF,CAAC,EAAE,CAACT,IAAI,CAAC,CAAC;EAEV,oBACEL,OAAA,CAACC,YAAY,CAAC6B,QAAQ;IACpBC,KAAK,EAAE;MACLvB,IAAI;MACJC,OAAO;MACPC,QAAQ;MACRC,WAAW;MACXC,QAAQ;MACRC,WAAW;MACXP,UAAU;MACVC,aAAa;MACbO;IACF,CAAE;IAAAX,QAAA,EAEDA;EAAQ;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAE5B,CAAC;AAAC/B,EAAA,CAjDWF,oBAAoB;AAAAkC,EAAA,GAApBlC,oBAAoB;AAmDjC,MAAMmC,QAAQ,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAM1C,UAAU,CAACK,YAAY,CAAC;AAAA;AAACqC,GAAA,CAA1CD,QAAQ;AAEd,eAAeA,QAAQ;AAAC,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module"}