{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mohamed.nader.BASS\\\\Desktop\\\\Cloud Project\\\\Project\\\\Cloud Project\\\\Cloud Frontend\\\\src\\\\Modules\\\\Authentication\\\\Login\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { makeStyles } from \"@material-ui/styles\";\nimport ButtonBlock from \"Components/Buttons/ButtonBlock\";\nimport InputField from \"Components/InputField\";\nimport AuthContext from \"Store/AuthContext\";\nimport axios from \"axios\";\nimport clsx from \"clsx\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport Container from \"react-bootstrap/Container\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const classes = useStyles();\n  const history = useHistory();\n  const authContext = useContext(AuthContext);\n  const [isSomethingWrong, setIsSomethingWrong] = useState(false);\n  const [user, setUser] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const onInputChange = e => {\n    setUser(oldData => {\n      return {\n        ...oldData,\n        [e.target.name]: e.target.value\n      };\n    });\n  };\n  const isValid = word => {\n    if (word.trim()) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  const handleLogin = e => {\n    e.preventDefault();\n    if (isValid(user.email) && isValid(user.password)) {\n      axios.post(`${process.env.REACT_APP_SERVER_ENDPOINT}/auth/login`, {\n        email: user.email,\n        password: user.password\n      }).then(res => {\n        setUser({\n          email: \"\",\n          password: \"\"\n        });\n        const userRole = res.data.admin ? \"admin\" : res.data.designer ? \"designer\" : \"regular\";\n        authContext.login(res.data._id ? res.data._id : \"\", res.data.email, res.data.jwt, userRole);\n        setTimeout(() => {\n          history.push(\"/clothingstore\");\n        }, 0);\n      }).catch(error => {\n        if (error.response && (error.response.data.error === \"Cannot read properties of null (reading 'password')\" || error.response.data.error === \"Invalid Credentials\")) {\n          setIsSomethingWrong(true);\n        }\n      });\n    } else {\n      setIsSomethingWrong(true);\n    }\n  };\n  useEffect(() => {\n    if (isSomethingWrong) {\n      setTimeout(() => {\n        setIsSomethingWrong(false);\n      }, 3000);\n    }\n  }, [isSomethingWrong]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: clsx(classes.login, {\n      \"mt-4\": true\n    }),\n    children: [isSomethingWrong && /*#__PURE__*/_jsxDEV(\"h5\", {\n      style: {\n        color: \"red\"\n      },\n      children: \"Email Or Password Is Wrong!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleLogin,\n      children: [/*#__PURE__*/_jsxDEV(InputField, {\n        icon: \"/icons/user/userBlack.svg\",\n        placeholder: \"Email\",\n        type: \"email\",\n        name: \"email\",\n        value: user.email,\n        onChange: onInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputField, {\n        icon: \"/icons/password/passwordBlack.svg\",\n        placeholder: \"Password\",\n        type: \"password\",\n        name: \"password\",\n        value: user.password,\n        onChange: onInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: clsx(classes.check, {\n          \"mt-4 p-2 mb-2 \": true\n        }),\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          className: classes.forgotPassword,\n          children: \"Forgot your password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonBlock, {\n        text: \"Login\",\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"u+6+HAiYqD7YaTzG4hDnTGbe9fk=\", false, function () {\n  return [useStyles, useHistory];\n});\n_c = Login;\nconst useStyles = makeStyles(theme => ({\n  login: {\n    maxWidth: 450\n  },\n  forgotPassword: {\n    lineHeight: \"18px\",\n    fontSize: \"14px\",\n    fontWeight: \"700\",\n    marginLeft: \"auto\",\n    color: theme.colors.grey\n  },\n  check: {\n    [\"@media (max-width:360px)\"]: {\n      flexDirection: \"column\",\n      \"& a\": {\n        marginLeft: \"inherit!important\",\n        marginTop: 6\n      }\n    }\n  }\n}));\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["makeStyles","ButtonBlock","InputField","AuthContext","axios","clsx","React","useContext","useEffect","useState","Container","Link","useHistory","jsxDEV","_jsxDEV","Login","_s","classes","useStyles","history","authContext","isSomethingWrong","setIsSomethingWrong","user","setUser","email","password","onInputChange","e","oldData","target","name","value","isValid","word","trim","handleLogin","preventDefault","post","process","env","REACT_APP_SERVER_ENDPOINT","then","res","userRole","data","admin","designer","login","_id","jwt","setTimeout","push","catch","error","response","className","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","icon","placeholder","type","onChange","required","check","forgotPassword","text","_c","theme","maxWidth","lineHeight","fontSize","fontWeight","marginLeft","colors","grey","flexDirection","marginTop","$RefreshReg$"],"sources":["C:/Users/mohamed.nader.BASS/Desktop/Cloud Project/Project/Cloud Project/Cloud Frontend/src/Modules/Authentication/Login/Login.js"],"sourcesContent":["import { makeStyles } from \"@material-ui/styles\";\r\nimport ButtonBlock from \"Components/Buttons/ButtonBlock\";\r\nimport InputField from \"Components/InputField\";\r\nimport AuthContext from \"Store/AuthContext\";\r\nimport axios from \"axios\";\r\nimport clsx from \"clsx\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\n\r\nconst Login = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const authContext = useContext(AuthContext);\r\n  const [isSomethingWrong, setIsSomethingWrong] = useState(false);\r\n  const [user, setUser] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const onInputChange = (e) => {\r\n    setUser((oldData) => {\r\n      return { ...oldData, [e.target.name]: e.target.value };\r\n    });\r\n  };\r\n\r\n  const isValid = (word) => {\r\n    if (word.trim()) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    if (isValid(user.email) && isValid(user.password)) {\r\n      axios\r\n        .post(`${process.env.REACT_APP_SERVER_ENDPOINT}/auth/login`, {\r\n          email: user.email,\r\n          password: user.password,\r\n        })\r\n        .then((res) => {\r\n          setUser({\r\n            email: \"\",\r\n            password: \"\",\r\n          });\r\n  \r\n          const userRole = res.data.admin\r\n            ? \"admin\"\r\n            : res.data.designer\r\n            ? \"designer\"\r\n            : \"regular\";\r\n  \r\n          authContext.login(\r\n            res.data._id ? res.data._id : \"\",\r\n            res.data.email,\r\n            res.data.jwt,\r\n            userRole\r\n          );\r\n          setTimeout(() => {\r\n            history.push(\"/clothingstore\");\r\n          }, 0);\r\n        })\r\n        .catch((error) => {\r\n          if (\r\n            error.response &&\r\n            (error.response.data.error ===\r\n              \"Cannot read properties of null (reading 'password')\" ||\r\n              error.response.data.error === \"Invalid Credentials\")\r\n          ) {\r\n            setIsSomethingWrong(true);\r\n          }\r\n        });\r\n    } else {\r\n      setIsSomethingWrong(true);\r\n    }\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n    if (isSomethingWrong) {\r\n      setTimeout(() => {\r\n        setIsSomethingWrong(false);\r\n      }, 3000);\r\n    }\r\n  }, [isSomethingWrong]);\r\n  return (\r\n    <Container\r\n      className={clsx(classes.login, {\r\n        \"mt-4\": true,\r\n      })}\r\n    >\r\n      {isSomethingWrong && (\r\n        <h5 style={{ color: \"red\" }}>Email Or Password Is Wrong!</h5>\r\n      )}\r\n      <form onSubmit={handleLogin}>\r\n        <InputField\r\n          icon=\"/icons/user/userBlack.svg\"\r\n          placeholder=\"Email\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          value={user.email}\r\n          onChange={onInputChange}\r\n          required\r\n        />\r\n        <InputField\r\n          icon=\"/icons/password/passwordBlack.svg\"\r\n          placeholder=\"Password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          value={user.password}\r\n          onChange={onInputChange}\r\n          required\r\n        />\r\n        <div\r\n          className={clsx(classes.check, {\r\n            \"mt-4 p-2 mb-2 \": true,\r\n          })}\r\n        >\r\n          <Link className={classes.forgotPassword}>Forgot your password?</Link>\r\n        </div>\r\n        <ButtonBlock text=\"Login\" type=\"submit\" />\r\n      </form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  login: {\r\n    maxWidth: 450,\r\n  },\r\n  forgotPassword: {\r\n    lineHeight: \"18px\",\r\n    fontSize: \"14px\",\r\n    fontWeight: \"700\",\r\n    marginLeft: \"auto\",\r\n    color: theme.colors.grey,\r\n  },\r\n  check: {\r\n    [\"@media (max-width:360px)\"]: {\r\n      flexDirection: \"column\",\r\n      \"& a\": {\r\n        marginLeft: \"inherit!important\",\r\n        marginTop: 6,\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}